<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastry Shop Admin Dashboard</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/tables.css">
    <link rel="stylesheet" href="styles/modal.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1>Pastry Shop Admin</h1>
                <p>Sign in to manage your shop</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Sign In</button>
            </form>
            <div id="loginError" class="error-message hidden"></div>
            
            <!-- Register Form -->
            <form id="registerForm" class="login-form hidden">
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Register</button>
            </form>
            <div id="registerError" class="error-message hidden"></div>
            
            <!-- Toggle between login and register -->
            <div class="form-toggle">
                <button type="button" id="showRegisterBtn" class="btn-link">Need an account? Register</button>
                <button type="button" id="showLoginBtn" class="btn-link hidden">Already have an account? Sign In</button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard hidden">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1>Pastry Shop Admin</h1>
            </div>
            <div class="header-right">
                <span id="userEmail" class="user-email"></span>
                <button id="logoutBtn" class="btn btn-secondary">Logout</button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="dashboard-nav">
            <button class="nav-btn active" data-section="products">Products</button>
            <button class="nav-btn" data-section="orders">Orders</button>
        </nav>

        <!-- Main Content -->
        <main class="dashboard-content">
            <!-- Products Section -->
            <section id="productsSection" class="content-section">
                <div class="section-header">
                    <h2>Products Management</h2>
                    <button id="addProductBtn" class="btn btn-primary">Add New Product</button>
                </div>
                <div class="table-container">
                    <table id="productsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Price</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Orders Section -->
            <section id="ordersSection" class="content-section hidden">
                <div class="section-header">
                    <h2>Orders Management</h2>
                </div>
                <div class="table-container">
                    <table id="ordersTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Delivery Date</th>
                                <th>Customer</th>
                                <th>Product</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Product Details Modal -->
    <div id="productDetailsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Product Details</h3>
                <button class="modal-close" id="closeProductDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="product-details">
                    <div class="product-info-section">
                        <h4>Product Information</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Product ID:</label>
                                <span id="productDetailsId">-</span>
                            </div>
                            <div class="info-item">
                                <label>Name:</label>
                                <span id="productDetailsName">-</span>
                            </div>
                            <div class="info-item">
                                <label>Price:</label>
                                <span id="productDetailsPrice" class="price-column">-</span>
                            </div>
                            <div class="info-item">
                                <label>Stock:</label>
                                <span id="productDetailsStock">-</span>
                            </div>
                            <div class="info-item">
                                <label>Status:</label>
                                <span id="productDetailsStatus" class="status-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Available:</label>
                                <span id="productDetailsAvailable">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="description-section">
                        <h4>Description</h4>
                        <div id="productDetailsDescription" class="product-description">
                            <!-- Description will be populated here -->
                        </div>
                    </div>
                    
                    <div class="images-section">
                        <h4>Product Images</h4>
                        <div id="productDetailsImages" class="product-images-detail">
                            <!-- Images will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelProductDetails">Close</button>
                <button type="button" class="btn btn-primary" id="editProductBtn">Edit Product</button>
                <button type="button" class="btn btn-secondary" id="changeProductStatusBtn">Change Status</button>
            </div>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Add New Product</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <form id="productForm" class="modal-form">
                <div class="form-group">
                    <label for="productName">Product Name</label>
                    <input type="text" id="productName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="productDescription">Description</label>
                    <textarea id="productDescription" name="description" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Price ($)</label>
                        <input type="number" id="productPrice" name="price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Stock</label>
                        <input type="number" id="productStock" name="stock" min="0" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="productStatus">Status</label>
                    <select id="productStatus" name="status" required>
                        <option value="">Select Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="featured">Featured</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productAvailable">Available</label>
                    <select id="productAvailable" name="available" required>
                        <option value="true">Yes</option>
                        <option value="false">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productImages">Product Images</label>
                    <input type="file" id="productImages" name="images" multiple accept="image/*" class="file-input">
                    <div class="file-input-info">
                        <small>Select multiple images (JPG, PNG, GIF)</small>
                    </div>
                    <div id="imagePreview" class="image-preview-container">
                        <!-- Image previews will be shown here -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelProduct">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Status Modal -->
    <div id="productStatusModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productStatusModalTitle">Change Product Status</h3>
                <button class="modal-close" id="closeProductStatusModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="product-info">
                    <h4 id="productStatusProductName">Product Name</h4>
                    <p>Current Status: <span id="productStatusCurrentStatus" class="status-badge">active</span></p>
                </div>
                <div class="status-options">
                    <h5>Available Actions:</h5>
                    <div class="status-actions">
                        <button class="status-action-btn" data-status="active" id="setActiveBtn">
                            <span class="status-icon">✓</span>
                            <span class="status-text">Set as Active</span>
                            <span class="status-description">Make product visible and available for purchase</span>
                        </button>
                        <button class="status-action-btn" data-status="inactive" id="setInactiveBtn">
                            <span class="status-icon">⏸</span>
                            <span class="status-text">Set as Inactive</span>
                            <span class="status-description">Hide product from customers but keep it in the system</span>
                        </button>
                        <button class="status-action-btn status-delete" data-status="deleted" id="setDeletedBtn">
                            <span class="status-icon">🗑</span>
                            <span class="status-text">Mark as Deleted</span>
                            <span class="status-description">Remove product from main view (logical delete)</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelProductStatus">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmationModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Product Deletion</h3>
                <button class="modal-close" id="closeDeleteConfirmationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <div class="warning-icon">⚠️</div>
                    <h4 id="deleteConfirmationProductName">Product Name</h4>
                    <p>Are you sure you want to mark this product as deleted?</p>
                </div>
                <div class="delete-consequences">
                    <h5>What will happen:</h5>
                    <ul>
                        <li>✅ Product will be hidden from the main product list</li>
                        <li>✅ Product will not be visible to customers</li>
                        <li>✅ Product data will be preserved (logical delete)</li>
                        <li>✅ Product can be restored later if needed</li>
                    </ul>
                </div>
                <div class="delete-note">
                    <p><strong>Note:</strong> You can undo this action within 10 seconds after confirmation, or restore the product manually later.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDeleteConfirmation">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteProduct">Yes, Mark as Deleted</button>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderDetailsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalles de la Orden</h3>
                <button class="modal-close" id="closeOrderDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="order-details">
                    <div class="order-info-section">
                        <h4>Información de la Orden</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>ID de Orden:</label>
                                <span id="orderDetailsId">-</span>
                            </div>
                            <div class="info-item">
                                <label>Fecha de Orden:</label>
                                <span id="orderDetailsDate">-</span>
                            </div>
                            <div class="info-item">
                                <label>Fecha de Entrega:</label>
                                <span id="orderDetailsDeliveryDate">-</span>
                            </div>
                            <div class="info-item">
                                <label>Total:</label>
                                <span id="orderDetailsTotal" class="price-column">-</span>
                            </div>
                            <div class="info-item">
                                <label>Estado:</label>
                                <span id="orderDetailsStatus" class="status-badge">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="customer-info-section">
                        <h4>Información del Cliente</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Nombre del Cliente:</label>
                                <span id="orderDetailsCustomer">-</span>
                            </div>
                            <div class="info-item">
                                <label>ID del Cliente:</label>
                                <span id="orderDetailsCustomerId">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="notes-section">
                        <h4>Notas de la Orden</h4>
                        <div id="orderDetailsNotes" class="order-notes">
                            <!-- Notes will be populated here -->
                        </div>
                    </div>
                    
                    <div class="items-section">
                        <h4>Productos de la Orden</h4>
                        <div id="orderDetailsItems" class="order-items-detail">
                            <!-- Items will be populated here -->
                        </div>
                        <div class="order-summary">
                            <div class="summary-row">
                                <label>Subtotal:</label>
                                <span id="orderDetailsSubtotal" class="price-column">-</span>
                            </div>
                            <div class="summary-row">
                                <label>Total de Artículos:</label>
                                <span id="orderDetailsItemCount">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelOrderDetails">Cerrar</button>
                <button type="button" class="btn btn-primary" id="updateOrderStatusBtn">Actualizar Estado</button>
            </div>
        </div>
    </div>

    <!-- Order Status Modal -->
    <div id="orderStatusModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Update Order Status</h3>
                <button class="modal-close" id="closeOrderModal">&times;</button>
            </div>
            <form id="orderStatusForm" class="modal-form">
                <div class="form-group">
                    <label for="orderStatus">Status</label>
                    <select id="orderStatus" name="status" required>
                        <option value="pending">Pending</option>
                        <option value="preparing">Preparing</option>
                        <option value="ready">Ready for Pickup</option>
                        <option value="delivered">Delivered</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelOrderStatus">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Status</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
