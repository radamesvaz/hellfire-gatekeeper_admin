<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n - Pasteler√≠a</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç∞</text></svg>">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/tables.css">
    <link rel="stylesheet" href="styles/modal.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1>Administraci√≥n de Pasteler√≠a</h1>
                <p>Inicia sesi√≥n para gestionar tu tienda</p>
            </div>
            
            <!-- Quote Section -->
            <div id="quoteSection" class="quote-section">
                <div class="quote-content">
                    <p id="quoteText" class="quote-text">Cargando cita inspiradora...</p>
                    <p id="quoteAuthor" class="quote-author">‚Äî Autor</p>
                </div>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="email">Correo Electr√≥nico</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Contrase√±a</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Iniciar Sesi√≥n</button>
            </form>
            <div id="loginError" class="error-message hidden"></div>
            
            <!-- Register Form -->
            <form id="registerForm" class="login-form hidden">
                <div class="form-group">
                    <label for="registerName">Nombre Completo</label>
                    <input type="text" id="registerName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Correo Electr√≥nico</label>
                    <input type="email" id="registerEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Contrase√±a</label>
                    <input type="password" id="registerPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Registrarse</button>
            </form>
            <div id="registerError" class="error-message hidden"></div>
            
            <!-- Toggle between login and register -->
            <div class="form-toggle">
                <button type="button" id="showRegisterBtn" class="btn-link">¬øNecesitas una cuenta? Reg√≠strate</button>
                <button type="button" id="showLoginBtn" class="btn-link hidden">¬øYa tienes una cuenta? Inicia Sesi√≥n</button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard hidden">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="header-left">
                    <h1>Administraci√≥n de Pasteler√≠a</h1>
                </div>
                <div class="header-right">
                    <span id="userEmail" class="user-email"></span>
                    <button id="logoutBtn" class="btn btn-secondary">Cerrar Sesi√≥n</button>
                </div>
            </div>
            <!-- Mobile header info -->
            <div class="header-mobile">
                <span id="userEmailMobile" class="user-email-mobile"></span>
                <button id="logoutBtnMobile" class="btn btn-secondary btn-mobile">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="dashboard-nav">
            <button class="nav-btn active" data-section="products">Productos</button>
            <button class="nav-btn" data-section="orders">Pedidos</button>
        </nav>

        <!-- Main Content -->
        <main class="dashboard-content">
            <!-- Products Section -->
            <section id="productsSection" class="content-section">
                <div class="section-header">
                    <h2>Gesti√≥n de Productos</h2>
                    <button id="addProductBtn" class="btn btn-primary">Agregar Nuevo Producto</button>
                </div>
                <div class="table-container">
                    <table id="productsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Orders Section -->
            <section id="ordersSection" class="content-section hidden">
                <div class="section-header">
                    <h2>Gesti√≥n de Pedidos</h2>
                    <div class="section-controls">
                        <label class="checkbox-container">
                            <input type="checkbox" id="showDeletedOrders" onchange="window.orderManager.toggleDeletedOrders()">
                            <span class="checkmark"></span>
                            Mostrar √≥rdenes eliminadas
                        </label>
                    </div>
                </div>
                <div class="table-container">
                    <table id="ordersTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Fecha de Entrega</th>
                                <th>Cliente</th>
                                <th>Producto</th>
                                <th>Estado</th>
                                <th>Pagado</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Product Details Modal -->
    <div id="productDetailsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalles del Producto</h3>
                <button class="modal-close" id="closeProductDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="product-details">
                    <div class="product-info-section">
                        <h4>Informaci√≥n del Producto</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>ID del Producto:</label>
                                <span id="productDetailsId">-</span>
                            </div>
                            <div class="info-item">
                                <label>Nombre:</label>
                                <span id="productDetailsName">-</span>
                            </div>
                            <div class="info-item">
                                <label>Precio:</label>
                                <span id="productDetailsPrice" class="price-column">-</span>
                            </div>
                            <div class="info-item">
                                <label>Inventario:</label>
                                <span id="productDetailsStock">-</span>
                            </div>
                            <div class="info-item">
                                <label>Estado:</label>
                                <span id="productDetailsStatus" class="status-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Disponible:</label>
                                <span id="productDetailsAvailable">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="description-section">
                        <h4>Descripci√≥n</h4>
                        <div id="productDetailsDescription" class="product-description">
                            <!-- Description will be populated here -->
                        </div>
                    </div>
                    
                    <div class="images-section">
                        <h4>Im√°genes del Producto</h4>
                        <div id="productDetailsImages" class="product-images-detail">
                            <!-- Images will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelProductDetails">Cerrar</button>
                <button type="button" class="btn btn-primary" id="editProductBtn">Editar Producto</button>
                <button type="button" class="btn btn-secondary" id="changeProductStatusBtn">Cambiar Estado</button>
            </div>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Agregar Nuevo Producto</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <form id="productForm" class="modal-form">
                <div class="form-group">
                    <label for="productName">Nombre del Producto</label>
                    <input type="text" id="productName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="productDescription">Descripci√≥n</label>
                    <textarea id="productDescription" name="description" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Precio ($)</label>
                        <input type="number" id="productPrice" name="price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Inventario</label>
                        <input type="number" id="productStock" name="stock" min="0" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="productStatus">Estado</label>
                    <select id="productStatus" name="status" required>
                        <option value="">Seleccionar Estado</option>
                        <option value="active">Activo</option>
                        <option value="inactive">Inactivo</option>
                        <option value="featured">Destacado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productAvailable">Disponible</label>
                    <select id="productAvailable" name="available" required>
                        <option value="true">S√≠</option>
                        <option value="false">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productImages">Im√°genes del Producto</label>
                    <input type="file" id="productImages" name="images" multiple accept="image/*" class="file-input">
                    <div class="file-input-info">
                        <small>Selecciona m√∫ltiples im√°genes (JPG, PNG, GIF)</small>
                    </div>
                    <div id="imagePreview" class="image-preview-container">
                        <!-- Image previews will be shown here -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelProduct">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Producto</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Product Status Modal -->
    <div id="productStatusModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productStatusModalTitle">Cambiar Estado del Producto</h3>
                <button class="modal-close" id="closeProductStatusModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="product-info">
                    <h4 id="productStatusProductName">Nombre del Producto</h4>
                    <p>Estado Actual: <span id="productStatusCurrentStatus" class="status-badge">active</span></p>
                </div>
                <div class="status-options">
                    <h5>Acciones Disponibles:</h5>
                    <div class="status-actions">
                        <button class="status-action-btn" data-status="active" id="setActiveBtn">
                            <span class="status-icon">‚úì</span>
                            <span class="status-text">Establecer como Activo</span>
                            <span class="status-description">Hacer el producto visible y disponible para compra</span>
                        </button>
                        <button class="status-action-btn" data-status="inactive" id="setInactiveBtn">
                            <span class="status-icon">‚è∏</span>
                            <span class="status-text">Establecer como Inactivo</span>
                            <span class="status-description">Ocultar el producto de los clientes pero mantenerlo en el sistema</span>
                        </button>
                        <button class="status-action-btn status-delete" data-status="deleted" id="setDeletedBtn">
                            <span class="status-icon">üóë</span>
                            <span class="status-text">Marcar como Eliminado</span>
                            <span class="status-description">Remover el producto de la vista principal (eliminaci√≥n l√≥gica)</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelProductStatus">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmationModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Eliminaci√≥n del Producto</h3>
                <button class="modal-close" id="closeDeleteConfirmationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="delete-warning">
                    <div class="warning-icon">‚ö†Ô∏è</div>
                    <h4 id="deleteConfirmationProductName">Nombre del Producto</h4>
                    <p>¬øEst√°s seguro de que quieres marcar este producto como eliminado?</p>
                </div>
                <div class="delete-consequences">
                    <h5>Lo que suceder√°:</h5>
                    <ul>
                        <li>‚úÖ El producto ser√° ocultado de la lista principal de productos</li>
                        <li>‚úÖ El producto no ser√° visible para los clientes</li>
                        <li>‚úÖ Los datos del producto ser√°n preservados (eliminaci√≥n l√≥gica)</li>
                        <li>‚úÖ El producto puede ser restaurado m√°s tarde si es necesario</li>
                    </ul>
                </div>
                <div class="delete-note">
                    <p><strong>Nota:</strong> Puedes deshacer esta acci√≥n dentro de 10 segundos despu√©s de la confirmaci√≥n, o restaurar el producto manualmente m√°s tarde.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDeleteConfirmation">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteProduct">S√≠, Marcar como Eliminado</button>
            </div>
        </div>
    </div>

    <!-- Delete Image Confirmation Modal -->
    <div id="deleteImageConfirmationModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Eliminar Imagen</h3>
                <button class="modal-close" id="closeDeleteImageConfirmationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="delete-image-preview">
                    <p>¬øEst√°s seguro de que quieres eliminar esta imagen?</p>
                    <div class="image-preview-container">
                        <img id="deleteImagePreview" src="" alt="Image to delete" class="delete-preview-image">
                    </div>
                    <p class="delete-warning">Esta acci√≥n no se puede deshacer.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDeleteImage">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteImage">S√≠, Eliminar Imagen</button>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderDetailsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalles de la Orden</h3>
                <button class="modal-close" id="closeOrderDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="order-details">
                    <div class="order-info-section">
                        <h4>Informaci√≥n de la Orden</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>ID de Orden:</label>
                                <span id="orderDetailsId">-</span>
                            </div>
                            <div class="info-item">
                                <label>Fecha de Orden:</label>
                                <span id="orderDetailsDate">-</span>
                            </div>
                            <div class="info-item">
                                <label>Fecha de Entrega:</label>
                                <span id="orderDetailsDeliveryDate">-</span>
                            </div>
                            <div class="info-item">
                                <label>Total:</label>
                                <span id="orderDetailsTotal" class="price-column">-</span>
                            </div>
                            <div class="info-item">
                                <label>Estado:</label>
                                <span id="orderDetailsStatus" class="status-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Pagado:</label>
                                <span id="orderDetailsPaid" class="paid-status">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="customer-info-section">
                        <h4>Informaci√≥n del Cliente</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Nombre del Cliente:</label>
                                <span id="orderDetailsCustomer">-</span>
                            </div>
                            <div class="info-item">
                                <label>ID del Cliente:</label>
                                <span id="orderDetailsCustomerId">-</span>
                            </div>
                            <div class="info-item">
                                <label>Tel√©fono:</label>
                                <span id="orderDetailsPhone">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="notes-section">
                        <h4>Notas de la Orden</h4>
                        <div id="orderDetailsNotes" class="order-notes">
                            <!-- Notes will be populated here -->
                        </div>
                    </div>
                    
                    <div class="items-section">
                        <h4>Productos de la Orden</h4>
                        <div id="orderDetailsItems" class="order-items-detail">
                            <!-- Items will be populated here -->
                        </div>
                        <div class="order-summary">
                            <div class="summary-row">
                                <label>Subtotal:</label>
                                <span id="orderDetailsSubtotal" class="price-column">-</span>
                            </div>
                            <div class="summary-row">
                                <label>Total de Art√≠culos:</label>
                                <span id="orderDetailsItemCount">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelOrderDetails">Cerrar</button>
                <button type="button" class="btn btn-primary" id="updateOrderStatusBtn">Actualizar Estado</button>
            </div>
        </div>
    </div>

    <!-- Order Status Modal -->
    <div id="orderStatusModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Actualizar Estado del Pedido</h3>
                <button class="modal-close" id="closeOrderModal">&times;</button>
            </div>
            <form id="orderStatusForm" class="modal-form">
                <div class="form-group">
                    <label for="orderStatus">Estado</label>
                    <select id="orderStatus" name="status" required>
                        <option value="pending">Pendiente</option>
                        <option value="confirmed">Confirmado</option>
                        <option value="preparing">Preparando</option>
                        <option value="ready">Listo para Recoger</option>
                        <option value="completed">Completado</option>
                        <option value="cancelled">Cancelado</option>
                        <option value="deleted">Eliminado</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelOrderStatus">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Actualizar Estado</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/favqs-config.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
